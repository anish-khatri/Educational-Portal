{% extends "./school_base.html" %} {% block body %}
<div class="container">
  <h2>{{ school.name }}</h2>

  {% if applications %}
  <table border="1">
    <thead>
      <tr>
        <th>Application ID</th>
        <th>Student ID</th>
        <th>Student Name</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Status</th>
        <th>View</th>
      </tr>
    </thead>
    <tbody>
      {% for application in applications %}
      <tr>
        <td>{{ application.id }}</td>
        <td>{{ application.student.id }}</td>
        <td>{{ application.student.first_name }} {{ application.student.last_name }}</td>
        <td>{{ application.student.phone }}</td>
        <td>{{ application.student.user.email }}</td>
        <td>{{ application.status }}</td>
        <td>
          <a href="{% url 'school_show_application' application.id %}" class="btn btn-info">View</a>

          {% if application.status == 'Approved' and not application.has_results %}
          <a href="{% url 'publish_result' application.id %}" class="btn btn-primary">Create Result
            Exam</a>
          {% endif %}

          {% if application.has_results %}
          <a href="{% url 'result_list' application.id %}" class="btn btn-info">View Results</a>
          {% endif %}

        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No applications found.</p>
  {% endif %}
</div>
{% endblock %}