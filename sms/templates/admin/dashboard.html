{% extends "admin/base.html" %}
{% block title %} Dashboard {% endblock title %} 

{% block body %}
<div class="container my-5">
  <h2 class="text-2xl font-bold mb-4">Welcome, {{ user.username }}</h2>

  <div class="row mb-4">
      <div class="col-md-3">
          <div class="card text-white bg-primary">
              <div class="card-body">
                  <h5>Students</h5>
                  <h3>{{ student_count }}</h3>
              </div>
          </div>
      </div>
      <div class="col-md-3">
          <div class="card text-white bg-success">
              <div class="card-body">
                  <h5>Total Schools</h5>
                  <h3>{{ school_count }}</h3>
              </div>
          </div>
      </div>
      <div class="col-md-3">
          <div class="card text-white bg-info">
              <div class="card-body">
                  <h5>Approved Schools</h5>
                  <h3>{{ approved_school_count }}</h3>
              </div>
          </div>
      </div>
  </div>

  <h4 class="mt-5">ðŸ•’ Subscriptions Expiring Soon</h4>
  {% if expiring_soon_schools %}
  <table class="table table-bordered mt-3">
      <thead class="table-light">
          <tr>
              <th>ID</th>
              <th>Name</th>
              <th>User</th>
              <th>End Date</th>
              <th>Status</th>
              <th>Details</th>
          </tr>
      </thead>
      <tbody>
          {% for school in expiring_soon_schools %}
          <tr>
              <td>{{ school.id }}</td>
              <td>{{ school.name }}</td>
              <td>{{ school.user.username }}</td>
              <td>{{ school.subscription_end_date }}</td>
              <td>{{ school.is_subscription_active }}</td>
              <td><a href="{% url 'school_detail' school.id %}" class="btn btn-sm btn-primary">View</a></td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
  {% else %}
  <p class="text-muted mt-3">No schools with subscriptions expiring in the next 7 days.</p>
  {% endif %}
</div>
{% endblock body %}
